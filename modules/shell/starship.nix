{
  pkgs,
  lib,
  ...
}: {
  programs.starship = {
    enable = true;
    enableBashIntegration = true;
    enableZshIntegration = true;

    settings = {
      # å¼ºåˆ¶ç¦ç”¨ OS æ¨¡å—ï¼Œå½»åº•ç§»é™¤æ‰€æœ‰å¯èƒ½å‡ºç°çš„å›¾æ ‡
      os.disabled = true;

      # =========================================================
      # ğŸ¨ æ ¸å¿ƒå¸ƒå±€é€»è¾‘ (å…³é”®ï¼šæ¨¡å—å¿…é¡»ç´§æŒ¨ç€ï¼Œä¸è¦æœ‰ç©ºæ ¼)
      # =========================================================
      format = lib.concatStrings [
        "$username"
        "$hostname"
        "$directory"
        "$git_branch"
        "$git_status"
        "$cmd_duration"
        "$line_break"
        "$character"
      ];

      # =========================================================
      # 1. èº«ä»½ä¿¡æ¯ï¼šå·¦åœ†å¤´ï¼Œæ·±è‰²èƒŒæ™¯ï¼Œæ— å›¾æ ‡
      # =========================================================
      username = {
        show_always = true;
        style_user = "bg:#4C566A fg:#ECEFF4 bold";
        # å·¦ä¾§åœ†å¤´
        format = "[î‚¶](fg:#4C566A)[$user]($style)";
      };

      hostname = {
        ssh_only = true;
        style = "bg:#4C566A fg:#ECEFF4 bold";
        format = "[@$hostname]($style)";
      };

      # =========================================================
      # 2. è·¯å¾„ä¿¡æ¯ï¼šè“åº•é»‘å­—ï¼Œä¸­é—´æ˜¯è¡”æ¥å°–è§’
      # =========================================================
      directory = {
        style = "bg:#88C0D0 fg:#2E3440 bold";
        # è¡”æ¥å¤„ï¼š[î‚°](èº«ä»½è‰²->è·¯å¾„è‰²)
        # ç»“å°¾å¤„ï¼š[î‚´](è·¯å¾„è‰²->é€æ˜) åŠ ä¸Šç‰¹æ®Šåç¼€ï¼Œå¦‚æœåé¢æœ‰æ¨¡å—ï¼Œä¼šè¢«è¦†ç›–
        format = "[î‚°](fg:#4C566A bg:#88C0D0)[ $path ]($style)[î‚´](fg:#88C0D0)";
        truncation_length = 3;
        fish_style_pwd_dir_length = 0;
      };

      # =========================================================
      # 3. Git æ¨¡å—ï¼šæ©™åº•é»‘å­—ï¼Œæ™ºèƒ½è¡”æ¥
      # =========================================================
      git_branch = {
        symbol = "ï˜ ";
        style = "bg:#D08770 fg:#2E3440 bold";
        # é‡ç‚¹ï¼šå¦‚æœ Git å‡ºç°ï¼Œå®ƒä¼šè‡ªå¸¦ä¸€ä¸ªâ€œå·¦è¡”æ¥å°–è§’â€ï¼Œ
        # å¹¶ä¸”ä¸ºäº†è§†è§‰ä¸ŠæŠµæ¶ˆ directory çš„åœ†å¤´ï¼Œæˆ‘ä»¬ç¨å¾®è°ƒæ•´ä½ç½®
        # æ³¨æ„ï¼šè¿™é‡Œæˆ‘ä»¬è®©å®ƒè‡ªæˆä¸€ä½“ï¼Œè§£å†³ä½ è¯´çš„â€œç©ºè‰²å—â€é—®é¢˜
        format = " [î‚¶](fg:#D08770)[$symbol$branch]($style)";
      };

      git_status = {
        style = "bg:#D08770 fg:#2E3440 bold";
        format = "[ $all_status$ahead_behind]($style)[î‚´](fg:#D08770)";
      };

      # =========================================================
      # 4. è€—æ—¶æ¨¡å—ï¼šé»„åº•é»‘å­—ï¼Œå®Œå…¨ç‹¬ç«‹
      # =========================================================
      cmd_duration = {
        min_time = 1000;
        style = "bg:#EBCB8B fg:#2E3440 bold";
        # ç‹¬ç«‹åœ†è§’èƒ¶å›Šï¼Œåªæœ‰åœ¨è¶…è¿‡ 1s æ—¶æ˜¾ç¤º
        format = " [î‚¶](fg:#EBCB8B)[ï‰’ $duration]($style)[î‚´](fg:#EBCB8B)";
      };

      # =========================================================
      # 5. ç¬¦å·
      # =========================================================
      character = {
        success_symbol = "[âœ](bold green) ";
        error_symbol = "[âœ](bold red) ";
      };

      add_newline = true;
    };
  };
}
