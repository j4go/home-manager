{
  pkgs,
  lib,
  ...
}: {
  programs.starship = {
    enable = true;
    enableBashIntegration = true;
    enableZshIntegration = true;

    settings = {
      # =========================================================
      # ğŸ¨ æ ¸å¿ƒå¸ƒå±€ï¼šPowerline ç¼å¸¦é£æ ¼
      # é€»è¾‘ï¼š[å¼€å§‹åœ†å¤´] -> [ç›®å½•(è“)] -> [ç®­å¤´(è“è½¬æ©™)] -> [Git(æ©™)] -> [ç®­å¤´(æ©™è½¬é»„)] -> [è€—æ—¶(é»„)] -> [ç»“æŸç®­å¤´]
      # =========================================================
      format = lib.concatStrings [
        "[î‚¶](fg:#88C0D0)" # 1. è“è‰²åœ†å¤´å¼€å§‹
        "$os"
        "$username"
        "$hostname"
        "$directory"
        "[î‚°](bg:#D08770 fg:#88C0D0)" # 2. è“è‰² -> æ©™è‰² è½¬æ¢ç®­å¤´
        "$git_branch"
        "$git_status"
        "[î‚°](bg:#EBCB8B fg:#D08770)" # 3. æ©™è‰² -> é»„è‰² è½¬æ¢ç®­å¤´
        "$cmd_duration"
        "[î‚°](fg:#EBCB8B)" # 4. é»„è‰² -> é€æ˜ ç»“æŸç®­å¤´
        "$line_break"
        "$character"
      ];

      # å³ä¾§ç•™ç©ºï¼Œå› ä¸ºç¼å¸¦é£æ ¼é€šå¸¸æŠŠæ‰€æœ‰ä¿¡æ¯éƒ½åœ¨å·¦ä¾§è¿èµ·æ¥æ‰å¥½çœ‹
      right_format = "";

      add_newline = true;

      # =========================================================
      # ğŸ› ä¿®å¤æŠ¥é”™ & ç³»ç»Ÿå›¾æ ‡
      # =========================================================
      os = {
        disabled = false;
        style = "bg:#88C0D0 fg:#2E3440 bold";
        symbols = {
          # âœ… å…³é”®ä¿®å¤ï¼šå¿…é¡»æ˜¯å¤§å†™çš„ L
          AlmaLinux = "ïŒ ";
          NixOS = "ïŒ“ ";
          Unknown = "ïˆ­ ";
        };
      };

      # =========================================================
      # ğŸ“‚ ç›®å½• (å¯¹åº”å›¾ä¸­çš„è“è‰²éƒ¨åˆ†)
      # =========================================================
      directory = {
        style = "bg:#88C0D0 fg:#2E3440 bold";
        format = "[ $path ]($style)";
        truncation_length = 3;
        truncation_symbol = "â€¦/";
        # æ—¢ç„¶æ˜¯ç¼å¸¦ï¼Œè·¯å¾„å¤ªé•¿ä¼šå¾ˆéš¾çœ‹ï¼Œå»ºè®®å¼€å¯ä¸€å®šçš„ç¼©å†™
        truncate_to_repo = false;
      };

      # =========================================================
      # ğŸ‘¤ ç”¨æˆ·å (èå…¥è“è‰²éƒ¨åˆ†)
      # =========================================================
      username = {
        show_always = true;
        style_user = "bg:#88C0D0 fg:#2E3440 bold";
        style_root = "bg:#88C0D0 fg:#BF616A bold";
        format = "[$user]($style)";
      };

      hostname = {
        ssh_only = true;
        style = "bg:#88C0D0 fg:#2E3440 bold";
        format = "[@$hostname]($style)";
      };

      # =========================================================
      # ğŸŒ¿ Git (å¯¹åº”å›¾ä¸­çš„æ©™/ç²‰è‰²éƒ¨åˆ†)
      # =========================================================
      git_branch = {
        symbol = "ï˜ ";
        style = "bg:#D08770 fg:#2E3440 bold";
        format = "[ $symbol$branch ]($style)";
      };

      git_status = {
        style = "bg:#D08770 fg:#2E3440 bold";
        format = "[$all_status$ahead_behind ]($style)";
      };

      # =========================================================
      # â±ï¸ è€—æ—¶ (å¯¹åº”å›¾ä¸­çš„é»„è‰²éƒ¨åˆ†)
      # =========================================================
      cmd_duration = {
        min_time = 500;
        style = "bg:#EBCB8B fg:#2E3440 bold";
        format = "[ ï‰’ $duration ]($style)";
      };

      # =========================================================
      # ğŸš€ æç¤ºç¬¦
      # =========================================================
      character = {
        success_symbol = "[âœ](bold green)";
        error_symbol = "[âœ–](bold red)";
      };

      # ç¦ç”¨ä¸éœ€è¦çš„æ¨¡å—é˜²æ­¢ç ´åç¼å¸¦è¿è´¯æ€§
      nix_shell.disabled = true; # æˆ–è€…ä½ å¯ä»¥æŠŠå®ƒåŠ åˆ°ç¼å¸¦é‡Œ
    };
  };
}
